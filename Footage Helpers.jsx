(function (global) {
    // prettier-ignore
    var Tree=function(){function t(){for(var t=-1,n=arguments.length;++t<n;)if(!arguments[t])return!1;return!0}function n(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);default:return t.apply(n,e)}}function e(t,n){for(var e=-1,r=t.length;++e<r;)n(t[e],e,t)}function r(t,n){for(var e=-1,r=t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function o(t,n){for(var e=-1,r=t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function i(t){return D([].slice.call(arguments,1),function(n){if(T(n))for(var e in n)m(n,e)&&(t[e]=n[e])}),t}function u(t,n){n=s(n,t);for(var e=0,r=n.length;null!=t&&e<r;)t=t[V(n[e++])];return e&&e==r?t:void 0}function f(t){return Object.prototype.toString.call(t)}function a(t,n){return c(t,n,function(n,e){return m(t,e)})}function c(t,n,r){var o={};return e(n,function(n){var e=t[n];r(e,n)&&(o[n]=e)}),o}function l(t){if("string"==typeof t)return t;if(x(t))return r(t,l)+"";var n=t+"";return"0"==n&&1/t==-qn?"-0":n}function s(t,n){if(x(t))return t;return O(t,n)?[t]:A(j(t))}function h(t,n){if(null==n||n<1)return[];for(var e=[],r=0,o=t.length;r<o;)e.push([].slice.call(t,r,r+=n));return e}function p(t){if(!I(t))return t;return x(t)?t.slice():i({},t)}function d(t){var n=x(t)?[]:{};return I(t)&&v(t,function(t,e,r){m(r,e)&&(n[e]=I(t)?d(t):t)}),n}function g(t){return function(){return t}}function b(t,n){for(var e=-1,r=t.length;++e<r;)if(t[e]===n)return!0;return!1}function v(t,n){var r=x(t)?e:D;return r(t,n)}function y(t,n,e){var r=null==t?void 0:t[n];return void 0===r?e:r}function m(t,n){return null!=t&&Object.prototype.hasOwnProperty.call(t,n)}function x(t){return"[object Array]"===f(t)}function k(t){return!0===t||!1===t}function w(t){return"function"==typeof t}function O(t,n){if(x(t))return!1;var e=typeof t;if("number"==e||"boolean"==e||null==t)return!0;return F(fe.test(t),!ue.test(t),null!=n&&t in Object(n))}function S(t){return null==t}function C(t){return null===t}function L(t){return"number"==typeof t}function T(n){var e=typeof n;return t(null!=n,"object"==e||"function"==e)}function I(t){return null!=t&&"object"==typeof t}function B(t){return"string"==typeof t}function N(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n}function P(t,n){var e={};return D(t,function(t,r,o){e[r]=n(t,r,o)}),e}function E(t,n){if(null==t)return{};for(var e={},r=0,o=t.length;r<o;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e}function D(t,n){e(N(t),function(e){n(t[e],e,t)})}function F(){for(var t=-1,n=arguments.length;++t<n;)if(arguments[t])return!0;return!1}function W(t,n){return r(t,z(n))}function z(t){return function(n){return n[t]}}function A(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(ae,function(t,e,r,o){n.push(r?o.replace(ne,"$1"):e||t)}),n}function R(){return!1}function U(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function V(t){if("string"==typeof t)return t;var n=t+"";return"0"==n&&1/t==-qn?"-0":n}function j(t){return null==t?"":l(t)}function G(){var t=[],n=[].concat.apply([],arguments);return e(n,function(n){b(t,n)||t.push(n)}),t}function K(t,n){return delete t[n],t}function X(t){for(var n=N(t),e=n.length,r=new Array(e),o=0;o<e;o++)r[o]=t[n[o]];return r}function Y(){for(var t=n(Math.max,null,W(arguments,"length").concat(0)),e=new Array(t),r=0;r<t;r++)e[r]=W(arguments,""+r);return e}function M(t,e,r,o){var i=sn(r)?Z:J;return n(i,null,arguments)}function H(t,e){var r=an(t.type)?_:Q;i(n(r,null,arguments),At(e))}function J(t,n,e,r){var o=At(n);t=In(t,e,An(n,e));if(gn(e)&&m(o,"selection"))return r.selectableElement.push({container:t,itemIndex:o.selection}),i(t,K(o,"selection"));return i(t,At(n))}function Q(t,n,e,r){e=ge&&_t(e)?"button":e;var o=Zt(e)?mt:Bn,i=o(t,e,An(n,e));return i}function _(t,n,e,r){return Nn(t,Ut(n))}function Z(t,n,e,r){var o=At(n),u=Pn(t,Ut(n));return o.expanded&&r.nodeItems.push(u),i(u,K(o,"expanded"))}function q(t,n,e){return St(n,function(n,r,o,i){var f=u(t,o);u(e,o)(f)&&(i[r]=f)}),n}function tt(t,n,e,r){return o(t,function(t){var i=[],u=o(t.children,function(t){return ln(t.type)&&i.push(t),r(t)&&n.push(t),e(n)});return!!u||tt(i,n,e,r)})}function nt(t,n,e){v(t,function(r,o){e(r,o,n.concat(o),t),I(r)&&nt(r,n.concat(o),e)})}function et(t,n,e,r,o){D(t,function(t,i){if(i=Lt(i).toLowerCase(),!mn(i)||!vn(n.type,i))return;if(Qt(i)){var u=e(n,t,i,o);et(t,u,e,r,o)}else r(n,t,i,o)})}function rt(t){return y(t,"config")}function ot(t){var n=t.properties;return n&&n.name}function it(t){return y(t,"param")}function ut(t){var n=y(t,"param");return x(n)?Ln(n):[]}function ft(t){var n=y(t,"style");return T(n)?n:{}}function at(t,n){var e=Yt(t,n),r=new Ct;return et(t,e,M,H,r),Wn(r.selectableElement),It(r.nodeItems),e}function ct(t,n,e,r){var o=at(t,n);return Xt(o,r),kn(o)&&e&&o.show(),o}function lt(t,n,e,r){var o=null;return function(){return(un(o)||se)&&(o=at(t,n)),Xt(o,r),kn(o)&&e&&o.show(),o}}function st(t){var e=t?lt:ct;return n(e,null,[].slice.call(arguments,1))}function ht(){var t=this.graphics.measureString(this.text,this.font),n=this.graphics.measureString(this.text,this.font,t[0]),e=se?Bt(n[0],this.text):n[0],r=(this.width-e)/2+this.left+this.fontOffset[0],o=be?me:(this.height-n[1])/2+this.top+this.fontOffset[1];return[r+Qe[0],o+Qe[1]]}function pt(t){return ScriptUI.newFont(t.fontName,Sn(t.fontStyle),t.fontSize)}function dt(t,e){var o=r(e,function(e){return n(En,t,e)});return E(Re,o)}function gt(t,n,e){var r=Et(e,n);S(r)&&(r={});var o=y(e,1,fr.bounds),u=y(e,2,fr.text),f={text:u,properties:{name:r.name}},c=t.add(bt(n,f),o),l=i(a(r,Xe),{bounds:o,text:u});return l=q(Cn(l),d(lr),hr),kt(c,n,l)}function bt(t,n){return wn(t)+yt(n)}function vt(t,n,e){var r=Et(e,n);S(r)&&(r={});var o=y(e,1,ar.bounds),u=y(e,2,ar.text),f={text:u,properties:{name:r.name}},c=t.add(bt(n,f),o),l=i(a(r,Ye),{bounds:o,text:u});return l=q(Cn(l),d(sr),pr),kt(c,n,l)}function yt(t){return Tt(uneval(t))}function mt(t,n,e){var r={rectbutton:gt,roundbutton:vt};return r[n](t,n,e)}function xt(t,n){var e=t.graphics,r="rectbutton"===n?"rectPath":"ellipsePath",o="rectbutton"===n?wt:Ot;return t.onDraw=function(){var n=new o(t);e[r](n.left,n.top,n.width,n.height),n.enableFill&&e.fillPath(n.pen.fill),n.enableStroke&&e.strokePath(n.pen.stroke),n.enableText&&e.drawString(n.text,n.pen.text,n.textX,n.textY,n.font)},t}function kt(t,n,e){var r=t.graphics,o=dt(r,Tn(e)),u=pt(On(e));return i(r,a(e,je),{pen:o.mouseout,font:u}),xt(Kn(Xn(t,o)),n)}function wt(t){this.graphics=t.graphics,this.enableText=this.graphics.enableText,this.enableFill=this.graphics.enableFill,this.enableStroke=this.graphics.enableStroke,this.fontOffset=this.graphics.fontOffset,this.pen=this.graphics.pen,this.text=t.text,this.font=this.graphics.font,this.left=0,this.top=0,this.width=t.size[0]-ye,this.height=t.size[1]-ye,this.textLocation=ht.call(this),this.textX=this.textLocation[0],this.textY=this.textLocation[1]}function Ot(t){this.graphics=t.graphics,this.enableText=this.graphics.enableText,this.enableFill=this.graphics.enableFill,this.enableStroke=this.graphics.enableStroke,this.fontOffset=this.graphics.fontOffset,this.pen=this.graphics.pen,this.text=t.text,this.font=this.graphics.font,this.left=this.pen.stroke.lineWidth,this.top=this.pen.stroke.lineWidth,this.width=t.size[0]-2*this.left-ye,this.height=t.size[1]-2*this.top-ye,this.textLocation=ht.call(this),this.textX=this.textLocation[0],this.textY=this.textLocation[1]}function St(t,e){nt(t,[],function(t){I(t)||n(e,null,arguments)})}function Ct(){this.nodeItems=[],this.selectableElement=[]}function Lt(t){return t.replace(te,"")}function Tt(t){return t.replace(ee,"")}function It(t){e(t,function(t){t.expanded=!0})}function Bt(t,n){var e=n.length;return t/((e+xe)/e)}function Nt(t,n){t.watch(n,function(t,n,e){return n})}function Pt(t){return!!t&&Jt(t.BridgeTalk)&&t.BridgeTalk}function Et(t,n){return t[Dt(n)]}function Dt(t){if(cn(t))return Ce[t];if(Zt(t))return Te[t];if(Qt(t))return Le[t]}function Ft(t){return x(t)?Ln(t):ut(t)}function Wt(t){function n(t){return t.length>0}t=String(t);var e=[];return tt([this],e,n,function(n){var e=ot(n);if(S(e))return!1;return t===e}),0===e.length?null:e[0]}function $t(){function t(){return targetNames.length===n.length}targetNames=Rn(arguments);var n=[],e=[];return tt([this],e,t,function(t){var e=ot(t);if(S(e))return!1;return b(targetNames,e)&&!b(n,e)&&n.push(e)}),0===e.length?null:e}function zt(){var t=Rn(arguments),n=[];return tt([this],n,R,function(n){return b(t,n.type)}),0===n.length?null:n}function At(t){return x(t)?{}:ft(t)}function Rt(t){return en(t)&&nn(t.global)&&t.global}function Ut(t){var n=T(t)?it(t):t;return String(n)}function Vt(t,n){return hn(n)?n:new Window(t[0],t[1],t[2],t[3])}function jt(t){return r(Gt(t),function(t){return t/255})}function Gt(t){var n;return t=t.replace(oe,"$1$1$2$2$3$3"),t.replace(ie,function(t,e,r,o){n=[parseInt(e,16),parseInt(r,16),parseInt(o,16)]}),n}function Kt(t,n){return jt(t).concat(n)}function Xt(t,n){t.layout.layout(n),t.layout.resize()}function Yt(t,n){var e=Vt(Yn(ut(t)),n);return e.onResizing=e.onResize=Dn,i(e,ft(t))}function Mt(t){return parseInt(Jn.appVersion)===t}function Ht(t,n){return function(e){return L(e)&&e>=t&&e<=n}}function Jt(t){return null!=t&&"[object BridgeTalk]"===f(t)}function Qt(t){return Ne.test(Ie[t])}function _t(t){return Fe.test(Ie[t])}function Zt(t){return De.test(Ie[t])}function qt(t){return F(Ht(0,3)(t),B(t)&&re.test(t))}function tn(t){return t===Hn}function nn(t){return null!=t&&"[object global]"===f(t)}function en(t){return null!=t&&"[object $]"===f(t)}function rn(t){return B(t)&&ie.test(t)}function on(t){return ce===t}function un(t){return null===t||!t.visible}function fn(t){return t.button===ze}function an(t){return Pe.test(Ie[t])}function cn(t){return $e.test(Ie[t])}function ln(t){return We.test(Ie[t])}function sn(t){return"node"===t}function hn(t){return t instanceof Panel}function pn(t){return hn(t)}function dn(t){return t.button===Ae}function gn(t){return Ee.test(Ie[t])}function bn(t){return"tabbedpanel"===t}function vn(t,n){var e=Ie[t]+Ie[n];return Be.test(e)}function yn(t){return tn(t)||pn(t)}function mn(t){return m(Ie,t)}function xn(t,n){return!!t&&b(n,t.appName)}function kn(t){return t instanceof Window}function wn(t){return Ke[t]}function On(t){return a(t,Ue)}function Sn(t){return B(t)?ScriptUI.FontStyle[t.toUpperCase()]:t}function Cn(t){return P(t,function(t,n){return b(Ge,n)&&!x(t)?U(4,g(t)):t})}function Ln(t){return r(t,function(t){return C(t)?void 0:t})}function Tn(t){return r(n(Y,null,X(a(t,Ve))),function(t){var e=h(t,3),o=Y(e[0],e[1]),i=r(o,function(t){return n(Kt,null,t)});return i.concat(e[2])})}function In(t,n,e){return t.add(n,e[1],e[2],e[3])}function Bn(t,n,e){return t.add(n,e[1],e[2],e[3],e[4],e[5])}function Nn(t,n){return t.add("item",n)}function Pn(t,n){return t.add("node",n)}function En(t,n,e,r){return{text:this.newPen(this.PenType.SOLID_COLOR,t,1),fill:this.newBrush(this.BrushType.SOLID_COLOR,n),stroke:this.newPen(this.PenType.SOLID_COLOR,e,r)}}function Dn(){this.layout.resize()}function Fn(t){if(!T(t))return null;var e=n(st,null,$n(t,_n));return ve.push(e),e}function Wn(t){e(t,function(t){var n=t.container,e=t.itemIndex;if(bn(n.type))return n.selection=t.itemIndex;var o=r(x(e)?e:[e],function(t){return n.items[t]});n.selection=o})}function $n(t,n){var e=i(p(cr),rt(t)),r=!!e.show,o=!!e.dockable,u=!!e.singleton,f=zn(n.context,o,u),a=Vn(n.layoutMode,e.layoutMode);return[u,t,f,r,a]}function zn(t,n,e){if(e||!n)return Window;if(yn(Mn))return Mn;return yn(t)?t:Window}function An(t,n){return Gn(Ft(t),n)}function Rn(t){return G(r([].concat.apply([],t),String))}function Un(t){e(t,function(t){var n=t.prototype;n.getElementById=Wt,n.getElementsByName=$t,n.getElementsByType=zt,Nt(n,"getElementById"),Nt(n,"getElementsByName"),Nt(n,"getElementsByType")})}function Vn(t,n){if(Ht(0,2)(n))return n;if(Ht(0,2)(t))return t;return 0}function jn(t,n){e(Re,function(e){t.addEventListener(e,n)})}function Gn(t,n){var e=t[0];if(S(e))return t;var r=Dt(n),o=t[r];if(T(o)||(t[r]={}),m(o,"name"))return t;return t[r].name=e,t}function Kn(t){return t.addEventListener("mouseup",function(n){n.stopPropagation(),w(t.onClick)&&fn(n)&&t.onClick()}),t}function Xn(t,n){return jn(t,function(e){if(e.stopPropagation(),dn(e))return;t.graphics.pen=n[e.type],t.notify("onDraw")}),t}function Yn(t){var n=String(t[0]);return t[0]=b(we,n)?n:Se,t}var Mn=this,Hn=Rt($),Jn=Pt(Hn),Qn=["aftereffects","photoshop","illustrator","indesign","estoolkit"];if(!xn(Jn,Qn))return null;var _n={},Zn="0.3.6",qn=1/0,te=/\d/g,ne=/\\(\\)?/g,ee=/\)$|^\(/g,re=/REGULAR|BOLD|ITALIC|BOLDITALIC/i,oe=/^#?([a-f\d])([a-f\d])([a-f\d])$/gi,ie=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/gi,ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fe=/^\w*$/,ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ce=Jn.appName,le=on("aftereffects"),se=on("photoshop"),he=on("illustrator"),pe=on("indesign"),de=on("estoolkit"),ge=le&&Mt(16),be=he||pe,ve=[],ye=se?1:0,me=he?4.5:5,xe=2.4,ke={aftereffects:["dialog","palette","window"],photoshop:"dialog",illustrator:["dialog","palette","window"],indesign:"dialog",estoolkit:["dialog","palette","window"]},we=ke[ce],Oe={aftereffects:"palette",photoshop:"dialog",illustrator:"palette",indesign:"dialog",estoolkit:"palette"},Se=Oe[ce],Ce={button:3,checkbox:3,dropdownlist:3,edittext:3,iconbutton:3,image:3,listbox:3,progressbar:4,radiobutton:3,scrollbar:5,slider:5,statictext:3,treeview:3},Le={group:2,panel:3,tab:3,tabbedpanel:3},Te={rectbutton:3,roundbutton:3,angle:3},Ie={button:"A",checkbox:"B",dialog:"C",dropdownlist:"D",edittext:"E",group:"G",iconbutton:"H",image:"I",item:"J",listbox:"K",node:"L",palette:"M",panel:"N",progressbar:"O",radiobutton:"P",scrollbar:"Q",slider:"R",statictext:"S",tab:"T",tabbedpanel:"U",treeview:"V",window:"W",rectbutton:"X",roundbutton:"Y"};de&&i(Ie,{flashplayer:"F"}),se&&K(Ie,"treeview");var Be=/[CGMNTW][ABDEFGHIKNOPQRSUVXYZ]|[DK]J|[VL][LJ]|UT/,Ne=/[DGKLNTUV]/,Pe=/[DKLV]/,Ee=/[DKUV]/,De=/[XYZ]/,Fe=/[XY]/,We=/[GNTU]/,$e=/[ABDEFHIKOPQRSV]/,ze=0,Ae=2,Re=["mouseover","mouseout","mousedown","mouseup"],Ue=["fontName","fontStyle","fontSize"],Ve=["fontColor","fillColor","strokeColor","fontOpacity","fillOpacity","strokeOpacity","strokeWidth"],je=["enableText","enableFill","enableStroke","fontOffset"],Ge=["fontColor","fillColor","strokeColor","fontOpacity","fillOpacity","strokeOpacity","strokeWidth"],Ke={rectbutton:"customView",roundbutton:"customView",angle:"customBoundedValue"},Xe=["enableText","enableFill","enableStroke","fontName","fontStyle","fontSize","fontOffset","fontColor","fillColor","strokeColor","fontOpacity","fillOpacity","strokeOpacity","strokeWidth"],Ye=Xe,Me={aftereffects:2,photoshop:1,illustrator:2,indesign:2,estoolkit:2},He=U(4,g(Me[ce])),Je={aftereffects:[0,0],photoshop:[0,0],illustrator:[0,2],indesign:[0,3],estoolkit:[0,-1]},Qe=Je[ce],_e={aftereffects:["#161616","#8a8a8a","#161616","#ffffff"],photoshop:["#f0f0f0","#f0f0f0","#f0f0f0","#ffffff"],illustrator:["#4b4b4b","#ffffff","#ffffff","#ffffff"],indesign:["#4b4b4b","#ffffff","#ffffff","#ffffff"],estoolkit:["#000000","#000000","#000000","#000000"]},Ze=_e[ce],qe={aftereffects:["#8a8a8a","#232323","#636363","#2d8ceb"],photoshop:["#454545","#454545","#363636","#454545"],illustrator:["#ffffff","#535353","#46a0f5","#46a0f5"],indesign:["#ffffff","#535353","#46a0f5","#46a0f5"],estoolkit:["#e5f1fb","#e1e1e1","#cce4f7","#e5f1fb"]},tr=qe[ce],nr={aftereffects:["#8a8a8a","#8a8a8a","#636363","#2d8ceb"],photoshop:["#666666","#666666","#636363","#1473e7"],illustrator:["#ffffff","#ffffff","#46a0f5","#46a0f5"],indesign:["#ffffff","#ffffff","#46a0f5","#46a0f5"],estoolkit:["#0078d7","#adadad","#005499","#0078d7"]},er=nr[ce],rr={aftereffects:[0,0,80,28],photoshop:[0,0,65,25],illustrator:[0,0,80,26],indesign:[0,0,80,28],estoolkit:[0,0,78,23]},or=rr[ce],ir={aftereffects:[0,0,30,30],photoshop:[0,0,28,28],illustrator:[0,0,28,28],indesign:[0,0,30,30],estoolkit:[0,0,23,23]},ur=ir[ce],fr={text:"",bounds:or},ar={text:"",bounds:ur},cr={dockable:!0,show:!0,singleton:!1},lr={enableText:!0,enableFill:!0,enableStroke:!0,fontName:"Tahoma",fontStyle:"REGULAR",fontSize:12,fontOffset:[0,0],fontColor:Ze,fillColor:tr,strokeColor:er,fontOpacity:[1,1,1,1],fillOpacity:[1,1,1,1],strokeOpacity:[1,1,1,1],strokeWidth:He},sr=lr,hr={enableText:k,enableFill:k,enableStroke:k,fontName:B,fontStyle:qt,fontSize:Ht(1,1e3),fontOffset:[L,L],fontColor:[rn,rn,rn,rn],fillColor:[rn,rn,rn,rn],strokeColor:[rn,rn,rn,rn],fontOpacity:[Ht(0,1),Ht(0,1),Ht(0,1),Ht(0,1)],fillOpacity:[Ht(0,1),Ht(0,1),Ht(0,1),Ht(0,1)],strokeOpacity:[Ht(0,1),Ht(0,1),Ht(0,1),Ht(0,1)],strokeWidth:[Ht(0,10),Ht(0,10),Ht(0,10),Ht(0,10)]},pr=hr;return Un([Window,Panel,Group]),_n.parse=Fn,_n.version=Zn,_n}.call(this);
    Tree.context = global;
    // prettier-ignore
    var _=function(){function e(){return app.project.showWindow(!0)}function r(e,r,t,n){var o=new MarkerValue(t);n&&(o.duration=n),e.markerProperty.setValueAtTime(r,o)}function t(e,r,t){var n=l(e,r);return Kr(t)&&pn(n,t),n}function n(e){var r=Kc();if(!r)return;return r.addFolder(e)}function o(e,r,t,n){var o=new MarkerValue(t);n&&(o.duration=n),e.marker.setValueAtTime(r,o)}function i(e,r){r=S(r);for(var t=0,n=r.length,o=e;o&&t<n;){var i=r[t++],u=o.property(i);u?(o=u):o.canAddProperty(i)&&(o=o.addProperty(i))}return o}function u(){for(var e=-1,r=arguments.length;++e<r;)if(!arguments[e])return!1;return!0}function a(e){return(Wo($n.call(arguments,1),function(r){if(Kr(r))for(var t in r)Ye(r,t)&&(e[t]=r[t])}),e)}function c(e,r){return r?e.layers.addBoxText(r):e.layers.addBoxText()}function p(e,r,t){return e.layers.addCamera(r,t)}function s(e,r,t,n,o,i){return Kc().addComp(e,r,t,n,o,i)}function l(e,r){return e.property('ADBE Effect Parade').addProperty(r)}function f(e,r,t){return t?e.layers.add(r,t):e.layers.add(r)}function m(e,r,t){return e.layers.addLight(r,t)}function d(e,r){return r?e.layers.addNull(r):e.layers.addNull()}function y(e){return e.layers.addShape()}function g(e,r,t,n,o,i,u){return u?e.layers.addSolid(r,t,n,o,i,u):e.layers.addSolid(r,t,n,o,i)}function h(e,r){return wr(r)?e.layers.addText():e.layers.addText(r)}function v(){return new Date().getTime()}function F(e,r){var t;return function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function P(e,r){return Lc(e).canAddProperty(r)}function D(e){return e.canSetExpression}function S(){if(!arguments.length)return[];var e=arguments[0];return yr(e)?e:[e]}function x(e){return go(e)}function L(e){return e.charCodeAt(0).toString(16)}function C(e,r,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==r&&(e=e>=r?e:r)),e}function A(){Yn={}}function E(e){if(!Ur(e))return e;return yr(e)?e.slice():a({},e)}function I(e){var r=yr(e)?[]:{};if(Ur(e)){var t=yr(e)?Wo:he;t(e,function(e,t,n){Ye(n,t)&&(r[t]=Ur(e)?I(e):e)})}return r}function T(e,r){if(!hr(e))return;var t=e.duplicate();r=a(E(mo),r);var n=0,o={},i={},u={},c={},p={},s=function(e,t){var i=t.id,u=Ye(c,i)?c[i]:(c[i]=t.duplicate());e.replaceSource(u,!1);var a=t.name;r.itemCallback(t,u);var p=u.name;if(p!==a){var s=Sn('comp("${0}")',a),l=Sn('comp("${0}")',p);o[s]=l}return n++<r.cloneDepth&&u},l=function(e,t,n,o){var a=n.id;r.syncExpression&&Du(e,function(e){lt(e,a)});var c=e.name,s=e.source;if((mt(e,function(e){r.layerCallback(e,t,n)}),Er(s)&&r.clonePredicate(e))){var l=s.id,f=Ye(p,l)?p[l]:(p[l]=fe(s));e.replaceSource(f,!1),r.itemCallback(s,f)}var m=e.name,d=o.name,y=n.name,g=m!==c,h=y!==d;if(g){var v=Sn('thisComp.layer("${0}")',c),F=Sn('thisComp.layer("${0}")',m);i[a+':'+v]=F}if(h||g){(v=Sn('comp("${0}").layer("${1}")',d,c)),(F=Sn('comp("${0}").layer("${1}")',y,m));u[v]=F}};return(en(t,s,l),r.syncExpression&&(r.syncCompExpression&&he(o,function(e,r){Ln('comp',r,e)}),r.syncLayerExpression&&he(i,function(e,r){Ln('layer',r,e)}),r.syncCompLayerExpression&&he(u,function(e,r){Ln('compLayer',r,e)})),A(),t)}function k(e,r){var t=gc(e,Ar),o=t[0],i=t[1],u=Ca(i,r),a=[];return(he(u,function(r,t){var o=n(t);(o.parentFolder=e),a.push(o),Wo(r,function(e){e.parentFolder=o})}),pi(o,Yt),a)}function B(e,r,t){var n=$c();if(Vr(n))return;var o=ki(e,Gr);if(vr(o))return;var i=Ca(o,xc),u=ht(i,function(e,r){return Le(r)});(t=be(t||oe(n,'_Footage'))),t.exists||t.create();var a=Me(t),c=[],p={},s=yn(u);return(Wo(S(r),function(e){su(e,function(e){if(c.length===s)return!1;var r=Vo(e);Ye(u,r)&&!Ye(p,r)&&(c.push(e),(p[r]=e))})}),Wo(c,function(e){M(e,oe(a,Vo(e)))}),c)}function j(){var e=arguments,r=e.length-1;return function(){for(var t=r,n=e[r].apply(this,arguments);t--;)n=e[t].call(this,n);return n}}function R(e){return function(){return e}}function b(e,r){for(var t=-1,n=e.length;++t<n;)if(e[t]===r)return!0;return!1}function O(e){var r=$t(e,'BINARY');return r.toSource().replace(io,'')}function M(e,r){if(((e=Re(e)),!e.exists))return!1;if(((r=Re(r)),e.fullName===r.fullName))return!1;return e.copy(r)}function G(e,r,t){return function(n){var o=jt(n,r),i=De(t,function(e){return Ye(o,e)&&!wr(o[e])});if(!i)return;var u=Rt(n,function(e,r){return b(lo,r)});b(r,'name')&&delete u.name;var c=e.apply(null,kn(o));return a(c,u)}}function w(e,r,t){return function(n,o){var i=jt(o,r),u=De(t,function(e){return Ye(i,e)&&!wr(i[e])});if(!u)return;var c=Rt(o,function(e,r){return b(so,r)});b(r,'name')&&delete c.name;var p=e.apply(null,[n].concat(kn(i)));return a(p,c)}}function V(e){return function(r,t){return r[e](t)}}function N(e,r,t,n){return function(o,i){for(var u=r(o),a=e-1,c=t(u)+e;++a<c&&!1!==i(n(u,a),a,o););return o}}function K(e,r,t){return function(n,o){var i=0;(function n(u,a){++a,e(u,function(e,u,c){if(r(e)&&!1===o(e,u,i++,a,c))return!1;t(e)&&n(e,a)})})(n,0)}}function U(e){return function(r,t){var n=0,o=!0;return(Oe(r,function(i){o&&e(i)&&!1===t(i,n++,r)&&(o=!1)}),r)}}function Q(e,r,t,n){return function(o,i){for(var u=r(o),a=t(u)+e;e<a--&&!1!==i(n(u,a),a,u););return u}}function _(e){return function(r,t){var n=[],o=0;return(e(r,function(e){t.apply(null,arguments)&&(n[o++]=e)}),n)}}function z(e){return function(r,t){var n;return(e(r,function(e){if(t.apply(null,arguments))return(n=e),!1}),n)}}function Y(e){return function(){return Fc(app,e)}}function J(e){return function(r){var t=e(r);return t&&t[0]}}function q(e){return function(r){return Fc(r,e)}}function W(e){return function(r){var t=e(r);return t&&t[t.length-1]}}function X(e){return function(r){return Pc(r,e)}}function Z(e){return function(r,t){var n=0,o=t.length;if(1===o)return e(r,t[0]);for(;null!=r&&n<o;)r=e(r,t[n++]);if(yr(r)&&0===r.length)return null;return n&&n==o?r:void 0}}function H(e){return function(r,t){var n={};return(e(r,function(e,r,o){var i=t(e,r,o);Ye(n,i)?n[i].push(e):(n[i]=[e])}),n)}}function ee(e){return function(r){return Dc(r)===e}}function re(e){return function(r,t){var n=[],o=0;return(e(r,function(){n[o++]=t.apply(null,arguments)}),n)}}function te(e){return function(r,t){t=wr(t)?0:t;var n=(r+'e').split('e'),o=e(n[0]+'e'+(+n[1]+t));return(n=(o+'e').split('e')),+(n[0]+'e'+(+n[1]-t))}}function ne(e){return function(r,t){var n=[],o=[];return(e(r,function(e,r,i){i=t(e,r,i)?n:o;i.push(e)}),[n,o])}}function oe(){return ct(arguments,'/')}function ie(e){return function(r,t){return e(r,Nt(t))}}function ue(e){return function r(){var t=$n.call(arguments);if(t.length>=e.length)return e.apply(null,t);return function(){return r.apply(null,t.concat($n.call(arguments)))}}}function ae(e){var r=e.replace(/\n/g,'').replace(/"([^"]+)"/g,function(e,r){return Ji(r.split(''),L).join('')}),t=r.match(/([\W\w]{4})/g);return Ji(t,or)}function ce(e){if(((e=Re(e)),!e.exists))return!0;return e.remove()}function pe(e){if(((e=be(e)),!e.exists))return!0;return e.remove()}function se(){Wo(_c(),le)}function le(e){e.selected=!1}function fe(e){return pt(),Se(qn),(e.selected=!0),Se(Jn),Zc()}function me(e,r){var t={source:e};pu(t,r)}function de(e,r){var t={source:e};ye(t,r)}function ye(e,r){function t(e){if(!gr(e))return!1;var r=e.id;return!b(o,r)&&(o.push(r),!0)}var n=0,o=[];(function e(o,i){++i,Ho(o,function(o,u,a){if(!1===r(o,u,n++,i,a))return!1;t(o.source)&&e(o,i)})})(e,0)}function ge(e,r){return ai(e.effect,r)}function he(e,r){for(var t in e)Ye(e,t)&&r(e[t],t,e)}function ve(e,r){var t=0;return(ui(e,function(e){gr(e)&&Zo(e,function(e,n,o){if(!1===r(e,t++,o))return!1})}),e)}function Fe(e){return e.replace(Zn,'')}function Pe(e){return $.evalFile(e.alias?e.resolve():e)}function De(e,r){for(var t=-1,n=e.length;++t<n;)if(!r(e[t],t,e))return!1;return!0}function Se(e){return app.executeCommand(e)}function xe(e){if(((e=Re(e)),!e.exists))return!1;return e.execute()}function Le(e){var r='';return(e.replace(ro,function(e){r=e}),r)}function Ce(e){var r;return(e.replace(Zn,function(e,t){r=t}),r)}function Ae(e){var r;return(e.replace(to,function(e,t){r=t}),r)}function Ee(e,r){for(var t=e.length,n=-1;++n<t;)if(r(e[n],n,e))return n;return-1}function Ie(e){return app.findMenuCommandId(e)}function Te(e){var r=e.toSource(),t=r.length>200?'[...]':r;return Sn('>(${0})',e.length)+t+'\n'+Ji(e,ke).join('\n')}function ke(e,r){return Sn('${0}: ${1}',r,String(e))}function Be(){var e=Gc();if(Vr(e))return null;return gr(e)?e:null}function je(){var e=Yc();if(vr(e))return null;var r=Pi(e,D);return Ji(r,function(e){return bn(['property','indexes'],[e,Jo(e)])})}function Re(e){return xr(e)?e:Dt(e)}function be(e){return Cr(e)?e:St(e)}function Oe(e,r){if(((e=be(e)),!e.exists))return[];return e.getFiles(r)}function Me(e){return e.toString()}function Ge(e){return fo[e||'en_US']}function we(e){var r=e.numLayers;return r&&e.layers[r]}function Ve(e){var r=['Adjustment','Comp','Text','Solid','Light','Camera','Null','Shape','Footage'],t=[mr,hr,cp,Hr,up,ip,Nr,ap,op],n=Ee(t,function(r){return r(e)});return n<0?'Unknown':r[n]}function Ne(e){return Fe(Vo(e))}function $e(e){var r=e.propertyDepth;return e.propertyGroup(r)}function Ke(e){for(var r=[],t=e,n=e.propertyDepth;n>0;)(r[n-1]=t),(t=t.parentProperty),(n=t.propertyDepth);return r}function Ue(e,r){var t=[],n=e,o=e.propertyDepth;for(r=rt(r)?r:'matchName';o>0;)(t[o-1]=n[r]),(n=n.parentProperty),(o=n.propertyDepth);return t}function Qe(e){return Ji(Jo(e),function(r){return e.keyValue(r)})}function _e(e){return e.numLayers&&e.layers[1]}function ze(e,r){return e[r]}function Ye(e,r){return Vn.call(e,r)}function Je(e){return!!$u(e,yu)}function qe(e){return!!bi(wc(),function(r){return r.matchName===e})}function We(e){return!!$u(e,gu)}function Xe(e){return!!$u(e,Pn)}function Ze(e){return''!==e.expression}function He(e){return Qo(e)>0}function er(e){return!!$u(e,vu)}function rr(e){return e.hasMax}function tr(e){return e.hasMin}function nr(e){return e.propertyType==PropertyType.PROPERTY&&e.propertyValueType!==PropertyValueType.NO_VALUE&&e.propertyValueType!==PropertyValueType.CUSTOM_VALUE}function or(e){return parseInt(e,16)}function ir(e){return e}function ur(e,r){return sr(e,ImportAsType.COMP,r)}function ar(e,r){return sr(e,ImportAsType.COMP_CROPPED_LAYERS,r)}function cr(e,r){return sr(e,ImportAsType.FOOTAGE,r)}function pr(e){return sr(e,ImportAsType.PROJECT)}function sr(e,r,t){e=Re(e);var n=new ImportOptions(e);if(!n.canImportAs(r))return;return(n.importAs=r),(n.sequence=!!t),app.project.importFile(n)}function lr(e,r,t){var n=null==e?0:e.length;t='number'==typeof t?(t<0?zn(n+t,0):t):0;for(var o=(t||0)-1,i=r==r;++o<n;){var u=e[o];if(i?u===r:u!=u)return o}return-1}function fr(e,r){r=wr(r)?1:r;return e.slice(0,e.length-r)}function mr(e){return e.adjustmentLayer}function dr(e){return e instanceof Application}function yr(e){return'[object Array]'===Nn.call(e)}function gr(e){return e instanceof CompItem}function hr(e){return Ye(e,'source')&&gr(e.source)}function vr(e){if(wr(e))return!0;for(var r in e)if(Ye(e,r))return!1;return!0}function Fr(e){return e.environmentLayer}function Pr(e){return''!==e.expressionError}function Dr(e){return 0==(1&e)}function Sr(e){return e.expressionEnabled}function xr(e){return e instanceof File}function Lr(e){return e.exists}function Cr(e){return e instanceof Folder}function Ar(e){return e instanceof FolderItem}function Er(e){return e instanceof FootageItem}function Ir(e){return Er(e.source)}function Tr(e){return'function'==typeof e}function kr(e){return e.guideLayer}function Br(e){return Er(e)&&xr(e.file)}function jr(e){return Br(e.source)}function Rr(e){return gr(e)||Er(e)||Ar(e)}function br(e){return!Xr(e)&&e.numProperties>0}function Or(e){return e instanceof MaskPropertyGroup}function Mr(){return!ut()}function Gr(e){return et(e)&&Ye(e.mainSource,'missingFootagePath')}function wr(e){return null==e}function Vr(e){return null===e}function Nr(e){return e.nullLayer}function $r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Kr(e){var r=typeof e;return u(null!=e,'object'==r||'function'==r)}function Ur(e){return null!=e&&'object'==typeof e}function Qr(e){return et(e)&&!Ye(e.mainSource,'missingFootagePath')}function _r(e){return Qr(e.source)}function zr(e){if(null==e)return!1;if('[object Object]'!==Nn.call(e))return!1;if(e.constructor&&!e.constructor.prototype.hasOwnProperty('isPrototypeOf'))return!1;return!0}function Yr(e){return e instanceof Property}function Jr(e){return e instanceof PropertyGroup}function qr(e){return e.status===RQItemStatus.QUEUED}function Wr(e){return Hn.test(Vo(e))}function Xr(e){return e.propertyType===PropertyType.PROPERTY}function Zr(e){return e.mainSource instanceof SolidSource}function Hr(e){return u(!Nr(e),Sc(e)instanceof SolidSource)}function et(e){return!0===e.footageMissing&&Ye(e,'mainSource')}function rt(e){return'string'==typeof e}function tt(e){return e.threeDLayer}function nt(e){return e.timeRemapEnabled}function ot(e){return void 0===e}function it(e){return''===e.expressionError}function ut(){return/Windows/.test($.os)}function at(e){return e instanceof XML}function ct(e,r){return wr(e)?'':Kn.call(e,r)}function pt(){e();var r=Be();r&&(r.openInViewer(),Se(Wn))}function st(e){var r=[];for(var t in e)Ye(e,t)&&r.push(t);return r}function lt(e,r){var t=e.expression;t.replace(ao,function(r,t){var n=Sn('comp("${0}")',t);ft('comp',n,function(t){e.expression=e.expression.replace(r,t)})}),t.replace(uo,function(t,n){var o=r+':'+Sn('thisComp.layer("${0}")',n);ft('layer',o,function(r){e.expression=e.expression.replace(t,r)})}),t.replace(co,function(r,t,n){var o=Sn('comp("${0}").layer("${1}")',t,n);ft('compLayer',o,function(t){e.expression=e.expression.replace(r,t)})})}function ft(e,r,t){Yn[e]||(Yn[e]={});var n=Yn[e];n[r]||(n[r]=[]),n[r].push(t)}function mt(e,r){if(!e.locked)return r(e);(e.locked=!1),r(e),(e.locked=!0)}function dt(e,r){var t=!r&&yr(e)?Te(e):String(e),n=oe(Lo,'soil_log.txt');return Bn(n,t+'\n',void 0,'a'),t}function yt(e){jn(oe(Lo,'soil_log.json'),e)}function gt(e,r){var t=v(),n=e(),o=v(),i=o-t;return(r=String(r).toLowerCase()),(r=Ye(po,r)?r:'ms'),dt(i/po[r]+' '+r),n}function ht(e,r){var t={};return(he(e,function(e,n,o){t[r(e,n,o)]=e}),t)}function vt(e,r){var t={};return(he(e,function(e,n,o){t[n]=r(e,n,o)}),t)}function Ft(e,r){if(((e=Re(e)),!e.exists))return!1;return e.rename(r)}function Pt(e){return function(){return!e.apply(this,arguments)}}function Dt(e){return new File(x(e))}function St(e){return new Folder(x(e))}function xt(){}function Lt(e){return app.objectToJSON(e)}function Ct(e){return F(2,e)}function At(){for(var e=-1,r=arguments.length;++e<r;)if(arguments[e])return!0;return!1}function Et(e){return function(){var r=$n.call(arguments);return De(e,function(e){return e.apply(null,r)})}}function It(e,r){var t=String(Number(e));if(t.length>=r)return t;return(Array(r).join(0)+t).slice(-r)}function Tt(e){var r=$t(e);return''===r?{}:Function('return ('+r+')')()}function kt(e){var r=vn($t(e)),t=Bt(r),n=Ji(t[0],Ae),o=Ji(Ji(t[1],hn),function(e){var r=Bt(e),t=Ji(r[0],Ae);e=Ji(r[1],Cn);return bn(t,e)});return bn(n,o)}function Bt(e){return(e.shift(),qa(e,function(e,r){return Dr(r)}))}function jt(e,r){var t={};return(Wo(r,function(r){Ye(e,r)&&(t[r]=e[r])}),t)}function Rt(e,r){var t={};return(Wo(st(e),function(n){var o=e[n];r(o,n,e)&&(t[n]=o)}),t)}function bt(e,r,t,n){return e.layers.precompose(r,t,n||!0)}function Ot(e,r,t){if(vr(e))return[];var n=wo(Wc(e));return Ji(e,function(e,o,i){var u=Tr(t)?t(e,o,i):e.name;return bt(n,S(e.index),u,r)})}function Mt(e,r){var t=zc();if(vr(t))return;return wt(t,e,r)}function Gt(e,r){var t=zc();if(vr(t))return;return Ot(t,e,r)}function wt(e,r,t){var n=wo(Wc(e)),o=Ji(e,No);return bt(n,o,r,t)}function Vt(e){$.writeln(e)}function Nt(e){return function(r){return r&&r[e]}}function $t(e,r){if(((e=Re(e)),!e.exists))return'';(e.encoding=r||'utf-8'),e.open('r');var t=e.read();return e.close(),t}function Kt(e){vi(Lc(e),Wt)}function Ut(e){Du(e,zt)}function Qt(e){yi(e,function(e,r,t){t.removeKey(r)})}function _t(){var e=je();if(vr(e))return;Wo(e,function(e){Jt(e.property,e.indexes)})}function zt(e){return(e.expression='')}function Yt(e){return e.remove()}function Jt(e,r){pi(r,function(r){e.removeKey(r)})}function qt(e){Pu(e,Qt)}function Wt(e){return e.remove()}function Xt(e){pi(e.selectedKeys,function(r){e.removeKey(r)})}function Zt(e,r){e.expression=e.expression.replace(ao,function(e,t){return e.split(t).join(r(t,e))})}function Ht(e,r){e.expression=e.expression.replace(uo,function(e,t){return e.split(t).join(r(t,e))})}function en(e,r,t){var n=e.source,o=r(e,n);if(!1===o)return;Zo(o,function(e,o,i){t(e,o,i,n),hr(e)&&en(e,r,t)})}function rn(e){if(((e=Re(e)),!e.exists))return!1;var r=be(e.path);return r.execute()}function tn(e){return(e=be(e)),!!e.exists&&e.execute()}function nn(){return Se(parseFloat(app.version)>16?3131:2359)}function on(e,r,t){return(e=Re(e)),(t=t||r.time),r.saveFrameToPng(t,e,0)}function un(e,r,t){t=String(t||e.name);var n=be(r);if(!u(gr(e),Cr(n),Lr(n)))return;var o=Me(n),i=e.frameRate,a=an(e.workAreaStart,i),c=an(e.workAreaDuration,i),p=String(c).length,s=e.frameDuration,l=xn(c,function(e){var r=It(a+e,p);return Dt(oe(o,Sn('${0}_${1}.png',t,r)))});Wo(l,function(r,t){on(r,e,t*s)})}function an(e,r){return Qn(e*r)}function cn(e,r,t){e=i(e,r);e&&e.canSetExpression&&(e.expression=t)}function pn(e,r){he(r,function(r,t){e.property(t).setValue(r)})}function sn(e,r,t){var n=i(e,r);return n&&n.setValue(t),n}function ln(e){return!!rr(e)&&(e.setValue(e.maxValue),!0)}function fn(e){return!!tr(e)&&(e.setValue(e.minValue),!0)}function mn(e,r){app.beginUndoGroup(e),r(),app.endUndoGroup()}function dn(e){var r=qc();r&&(r.zoom=e)}function yn(e){if(yr(e))return e.length;if(Kr(e))return st(e).length;return 0}function gn(e,r){for(var t=-1,n=e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}function hn(e){return e.split(no)}function vn(e){return e.split(oo)}function Fn(){return!1}function Pn(){return!0}function Dn(e,r){return e-r}function Sn(e){var r=$n.call(arguments,1);return e.replace(eo,function(e){return r[e.match(Xn)[0]]})}function xn(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Ln(e,r){var t=Yn[e],n=t&&t[r];if(!n||0===n.length)return!1;for(var o,i=0;(o=n[i++]);)o.apply(this,$n.call(arguments,2))}function Cn(e){return e.replace(/^\t+/gm,'').replace(/^"/gm,'').replace(/\\$/gm,'').replace(/"$/gm,'').replace(/\n/g,'')}function An(e){return function(r){return e(r)}}function En(e,r){return function(){return mn(e,r)}}function In(){var e=[],r=Un.apply([],arguments);return(Wo(r,function(r){b(e,r)||e.push(r)}),e)}function Tn(e){var r=0;return((e=Pi(e,function(e){return(r=zn(e.length,r)),!0})),xn(r,function(r){return Ji(e,Nt(r))}))}function kn(e){var r=[],t=0;return(he(e,function(e){r[t++]=e}),r)}function Bn(e,r,t,n){(n=n||'w'),(e=Re(e)),(e.encoding=t||'utf-8');var o=St(e.path);return o.exists||o.create(),e.open(n)&&e.write(r)&&e.close()&&e}function jn(e,r){return Bn(e,Lt(r)+'\n')}function Rn(){for(var e=-1,r=zn.apply(null,ra(arguments,'length').concat(0)),t=new Array(r);++e<r;)t[e]=ra(arguments,''+e);return t}function bn(e,r){for(var t=-1,n=e.length,o=r.length,i={};++t<n;)i[e[t]]=t<o?r[t]:void 0;return i}var On={},Mn='alpha 0.0.1',Gn=Array.prototype,wn=Object.prototype,Vn=wn.hasOwnProperty,Nn=wn.toString,$n=Gn.slice,Kn=Gn.join,Un=Gn.concat,Qn=Math.floor,_n=Math.round,zn=Math.max,Yn=(Math.min,{}),Jn=2080,qn=2004,Wn=3696,Xn=/\d+/,Zn=/\.([^\.]+)$/,Hn=/\.jsx(bin)?$/,eo=/\$\{\d+\}/g,ro=/[^\\\/]+$/,to=/"([^"]+?)"/,no=/^\s*?"([^"]*?)"\s*?=\s*?\s*/gm,oo=/^\["([^\]]+)"\][^"]/gm,io=/(^\(new String\("|"\)\)$)/g,uo=/thisComp\s*?\.\s*?layer\s*?\(\s*?['"]([^\)]+?)['"]\s*?\)/g,ao=/comp\s*?\(\s*?['"]([^\)]+?)['"]\s*?\)(?!\s*\.\s*layer)/g,co=/comp\s*?\(\s*?['"]([^\)]+?)['"]\s*?\)\s*?.\s*?layer\s*?\(\s*?['"]([^\)]+?)['"]\s*?\)/g,po={ms:1,s:1e3,m:6e4,h:36e5},so=['autoOrient','comment','enabled','inPoint','label','locked','name','outPoint','parent','shy','solo','startTime','stretch','adjustmentLayer','audioEnabled','blendingMode','collapseTransformation','effectsActive','environmentLayer','frameBlendingType','guideLayer','motionBlur','preserveTransparency','quality','threeDLayer','threeDPerChar','timeRemapEnabled','trackMatteType'],lo=['comment','enabled','label','name','parentFolder','selected','duration','frameDuration','frameRate','height','pixelAspect','time','useProxy','width','bgColor','counters','displayStartFrame','displayStartTime','draft3d','dropFrame','frameBlending','hideShyLayers','motionBlur','motionBlurAdaptiveSampleLimit','motionBlurSamplesPerFrame','motionGraphicsTemplateControllerCount','motionGraphicsTemplateName','preserveNestedFrameRate','preserveNestedResolution','renderer','resolutionFactor','shutterAngle','shutterPhase','workAreaDuration','workAreaStart'],fo={en_US:['None','Red','Yellow','Aqua','Pink','Lavender','Peach','Sea Foam','Blue','Green','Purple','Orange','Brown','Fuchsia','Cyan','Sandstone','Dark Green']},mo={cloneDepth:1/0,syncExpression:!0,syncCompExpression:!0,syncLayerExpression:!0,syncCompLayerExpression:!0,clonePredicate:Fn,layerCallback:ir,itemCallback:ir},yo=File.fs,go=File.decode,ho=Folder.encode,vo=Folder.isEncodingAvailable,Fo=Folder.selectDialog,Po=Folder.appData,Do=Folder.appPackage,So=Folder.commonFiles,xo=Folder.current,Lo=Folder.desktop,Co=Folder.fs,Ao=Folder.myDocuments,Eo=$.fileName,Io=Folder.startup,To=Folder.system,ko=Folder.temp,Bo=Folder.trash,jo=Folder.userData,Ro=te(Qn),bo=te(_n),Oo=V('keyValue'),Mo=V('layer'),Go=V('property'),wo=Nt('containingComp'),Vo=Nt('displayName'),No=Nt('index'),$o=Nt('items'),Ko=Nt('layers'),Uo=Nt('length'),Qo=Nt('numKeys'),_o=Nt('numLayers'),zo=Nt('numProperties'),Yo=Nt('outputModules'),Jo=Nt('selectedKeys'),qo=Nt('source'),Wo=N(0,ir,Uo,ze),Xo=N(1,ir,Uo,ze),Zo=N(1,Ko,Uo,ze),Ho=N(1,qo,_o,Mo),ei=U(xr),ri=N(0,Oe,Uo,ze),ti=N(1,$o,Uo,ze),ni=U(Cr),oi=N(1,ir,Qo,Oo),ii=N(1,Yo,Uo,ze),ui=N(1,$o,Uo,ze),ai=N(1,ir,zo,Go),ci=N(1,$o,Uo,ze),pi=Q(0,ir,Uo,ze),si=Q(1,ir,Uo,ze),li=Q(1,Ko,Uo,ze),fi=Q(1,qo,_o,Mo),mi=Q(0,Oe,Uo,ze),di=Q(1,$o,Uo,ze),yi=Q(1,ir,Qo,Oo),gi=Q(1,Yo,Uo,ze),hi=Q(1,$o,Uo,ze),vi=Q(1,ir,zo,Go),Fi=Q(1,$o,Uo,ze),Pi=_(Wo),Di=_(Xo),Si=_(Zo),xi=_(Ho),Li=_(ei),Ci=_(ri),Ai=_(ti),Ei=_(ni),Ii=_(oi),Ti=_(ii),ki=_(ui),Bi=_(ve),ji=_(ai),Ri=_(ci),bi=z(Wo),Oi=z(Xo),Mi=z(Zo),Gi=z(Ho),wi=z(ei),Vi=z(ri),Ni=z(ti),$i=z(ni),Ki=z(oi),Ui=z(ii),Qi=z(ui),_i=z(ve),zi=z(ai),Yi=z(ci),Ji=re(Wo),qi=re(Xo),Wi=re(Zo),Xi=re(Ho),Zi=re(ei),Hi=re(ri),eu=re(ti),ru=re(ni),tu=re(oi),nu=re(ii),ou=re(ui),iu=re(ve),uu=re(ai),au=re(ci),cu=K(Wo,Pt(yr),yr),pu=K(Ho,Pn,hr),su=K(ri,xr,Cr),lu=K(ri,Pn,Cr),fu=K(ti,Pn,Ar),mu=K(ri,Cr,Cr),du=K(ai,Pn,br),yu=Et([D,Ze,Sr,it]),gu=Et([D,Pr]),hu=Et([D]),vu=Et([D,Ze]),Fu=K(ai,yu,br),Pu=K(ai,hu,br),Du=K(ai,vu,br),Su=_(cu),xu=_(me),Lu=_(de),Cu=_(pu),Au=_(ye),Eu=_(su),Iu=_(lu),Tu=_(fu),ku=_(mu),Bu=_(du),ju=_(Pu),Ru=z(cu),bu=z(me),Ou=z(pu),Mu=z(su),Gu=z(lu),wu=z(fu),Vu=z(mu),Nu=z(du),$u=z(Pu),Ku=re(cu),Uu=re(me),Qu=re(de),_u=re(pu),zu=re(ye),Yu=re(su),Ju=re(lu),qu=re(fu),Wu=re(mu),Xu=re(du),Zu=re(Pu),Hu=re(Du),ea=re(Fu),ra=ie(Ji),ta=ie(qi),na=ie(Wi),oa=ie(Xi),ia=ie(Zi),ua=ie(Hi),aa=ie(eu),ca=ie(ru),pa=ie(tu),sa=ie(nu),la=ie(ou),fa=ie(iu),ma=ie(uu),da=ie(au),ya=ie(Ku),ga=ie(Uu),ha=ie(Qu),va=ie(_u),Fa=ie(zu),Pa=ie(Yu),Da=ie(Ju),Sa=ie(qu),xa=ie(Wu),La=ie(Xu),Ca=H(Wo),Aa=H(Zo),Ea=H(Ho),Ia=H(ei),Ta=H(ri),ka=H(ti),Ba=H(ni),ja=H(Xo),Ra=H(oi),ba=H(ii),Oa=H(ui),Ma=H(ve),Ga=H(ai),wa=H(ci),Va=H(cu),Na=H(me),$a=H(de),Ka=H(pu),Ua=H(ye),Qa=H(su),_a=H(lu),za=H(fu),Ya=H(mu),Ja=H(du),qa=ne(Wo),Wa=ne(Xo),Xa=ne(Zo),Za=ne(Ho),Ha=ne(ei),ec=ne(ri),rc=ne(ti),tc=ne(ni),nc=ne(oi),oc=ne(ii),ic=ne(ui),uc=ne(ve),ac=ne(ai),cc=ne(ci),pc=ne(cu),sc=ne(me),lc=ne(de),fc=ne(pu),mc=ne(ye),dc=ne(su),yc=ne(lu),gc=ne(fu),hc=ne(mu),vc=ne(du),Fc=Z(ze),Pc=Z(Go),Dc=q(['constructor','name']),Sc=q(['source','mainSource']),xc=q(['mainSource','missingFootagePath']),Lc=X(['ADBE Effect Parade']),Cc=X(['ADBE Layer Styles']),Ac=X(['ADBE Root Vectors Group']),Ec=X(['ADBE Transform Group']),Ic=X(['ADBE Transform Group','ADBE Anchor Point']),Tc=X(['ADBE Audio Group','ADBE Audio Levels']),kc=X(['ADBE Transform Group','ADBE Orientation']),Bc=X(['ADBE Transform Group','ADBE Position']),jc=X(['ADBE Transform Group','ADBE Rotate X']),Rc=X(['ADBE Transform Group','ADBE Rotate Y']),bc=X(['ADBE Transform Group','ADBE Rotate Z']),Oc=X(['ADBE Transform Group','ADBE Scale']),Mc=jc,Gc=Y(['project','activeItem']),wc=Y(['effects']),Vc=Y(['project']),Nc=Y(['project','file']),$c=Y(['project','file','parent']),Kc=Y(['project','items']),Uc=Y(['project','renderQueue']),Qc=Y(['project','rootFolder']),_c=Y(['project','selection']),zc=Y(['project','activeItem','selectedLayers']),Yc=Y(['project','activeItem','selectedProperties']),Jc=Y(['settings']),qc=Y(['activeViewer','views','0','options']),Wc=J(ir),Xc=J(zc),Zc=J(_c),Hc=J(Yc),ep=W(ir),rp=W(_c),tp=W(zc),np=W(Yc),op=ee('AVLayer'),ip=ee('CameraLayer'),up=ee('LightLayer'),ap=ee('ShapeLayer'),cp=ee('TextLayer'),pp=G(s,['name','width','height','pixelAspect','duration','frameRate'],['name','width','height','pixelAspect','duration','frameRate']),sp=w(f,['item','duration'],['item']),lp=w(c,['size'],['size']),fp=w(p,['name','centerPoint'],['name','centerPoint']),mp=w(m,['name','centerPoint'],['name','centerPoint']),dp=w(d,['duration'],[]),yp=w(y,[],[]),gp=w(g,['color','name','width','height','pixelAspect','duration'],['color','name','width','height','pixelAspect']),hp=w(h,['sourceText'],[]);return((On.decode=go),(On.encode=ho),(On.fileSystem=yo),(On.isEncodingAvailable=vo),(On.pathAppData=Po),(On.pathAppPackage=Do),(On.pathCommonFiles=So),(On.pathCurrent=xo),(On.pathDesktop=Lo),(On.pathFs=Co),(On.pathMyDocuments=Ao),(On.pathScript=Eo),(On.pathStartup=Io),(On.pathSystem=To),(On.pathTemp=ko),(On.pathTrash=Bo),(On.pathUserData=jo),(On.selectDialog=Fo),(On.version=Mn),(On.activeProjectPanel=e),(On.addBoxText=lp),(On.addCamera=fp),(On.addComp=pp),(On.addCompMarker=r),(On.addEffect=t),(On.addFolderItem=n),(On.addLayer=sp),(On.addLayerMarker=o),(On.addLight=mp),(On.addNull=dp),(On.addProperty=i),(On.addShape=yp),(On.addSolid=gp),(On.addText=hp),(On.and=u),(On.assign=a),(On.baseAddBoxText=c),(On.baseAddCamera=p),(On.baseAddComp=s),(On.baseAddEffect=l),(On.baseAddLayer=f),(On.baseAddLight=m),(On.baseAddNull=d),(On.baseAddShape=y),(On.baseAddSolid=g),(On.baseAddText=h),(On.baseGetTime=v),(On.before=F),(On.canAddEffect=P),(On.canSetExpression=D),(On.clamp=C),(On.clone=E),(On.cloneCompLayerDeep=T),(On.cloneDeep=I),(On.collectItemsBy=k),(On.collectMissingFootage=B),(On.compose=j),(On.constant=R),(On.contains=b),(On.copyFile=M),(On.createPath=oe),(On.curry=ue),(On.decodePrefs=ae),(On.deleteFile=ce),(On.deleteFolder=pe),(On.deselectAllItems=se),(On.deselectItem=le),(On.duplicateItem=fe),(On.each=Wo),(On.eachActiveExpressionPropertiesDeep=Fu),(On.eachCollection=Xo),(On.eachCollectionRight=si),(On.eachCompItem=Zo),(On.eachCompItemDeep=me),(On.eachCompItemDeepOnce=de),(On.eachCompItemRight=li),(On.eachCompLayer=Ho),(On.eachCompLayerDeep=pu),(On.eachCompLayerDeepOnce=ye),(On.eachCompLayerRight=fi),(On.eachDeep=cu),(On.eachExpressionPropertiesDeep=Pu),(On.eachFileSet=ei),(On.eachFileSetDeep=su),(On.eachFolder=ri),(On.eachFolderDeep=lu),(On.eachFolderItem=ti),(On.eachFolderItemDeep=fu),(On.eachFolderItemRight=di),(On.eachFolderRight=mi),(On.eachFolderSet=ni),(On.eachFolderSetDeep=mu),(On.eachKeyframes=oi),(On.eachKeyframesRight=yi),(On.eachLayerEffects=ge),(On.eachModifiedExpressionPropertiesDeep=Du),(On.eachObject=he),(On.eachOutputModules=ii),(On.eachOutputModulesRight=gi),(On.eachProjectItems=ui),(On.eachProjectItemsRight=hi),(On.eachProjectLayers=ve),(On.eachPropertyGroup=ai),(On.eachPropertyGroupDeep=du),(On.eachPropertyGroupRight=vi),(On.eachRenderQueue=ci),(On.eachRenderQueueRight=Fi),(On.eachRight=pi),(On.escapeSuffix=Fe),(On.evalFile=Pe),(On.every=De),(On.executeCommand=Se),(On.executeFile=xe),(On.extractFileNameFromPath=Le),(On.extractFileSuffix=Ce),(On.fileToBinary=O),(On.filter=Pi),(On.filterCollection=Di),(On.filterCompItem=Si),(On.filterCompItemDeep=xu),(On.filterCompItemDeepOnce=Lu),(On.filterCompLayer=xi),(On.filterCompLayerDeep=Cu),(On.filterCompLayerDeepOnce=Au),(On.filterDeep=Su),(On.filterExpressionPropertiesDeep=ju),(On.filterFileSet=Li),(On.filterFileSetDeep=Eu),(On.filterFolder=Ci),(On.filterFolderDeep=Iu),(On.filterFolderItem=Ai),(On.filterFolderItemDeep=Tu),(On.filterFolderSet=Ei),(On.filterFolderSetDeep=ku),(On.filterKeyframes=Ii),(On.filterOutputModules=Ti),(On.filterProjectItems=ki),(On.filterProjectLayers=Bi),(On.filterPropertyGroup=ji),(On.filterPropertyGroupDeep=Bu),(On.filterRenderQueue=Ri),(On.find=bi),(On.findCollection=Oi),(On.findCompItem=Mi),(On.findCompItemDeep=bu),(On.findCompLayer=Gi),(On.findCompLayerDeep=Ou),(On.findDeep=Ru),(On.findExpressionPropertiesDeep=$u),(On.findFileSet=wi),(On.findFileSetDeep=Mu),(On.findFolder=Vi),(On.findFolderDeep=Gu),(On.findFolderItem=Ni),(On.findFolderItemDeep=wu),(On.findFolderSet=$i),(On.findFolderSetDeep=Vu),(On.findIndex=Ee),(On.findKeyframes=Ki),(On.findMenuCommandId=Ie),(On.findOutputModules=Ui),(On.findProjectItems=Qi),(On.findProjectLayers=_i),(On.findPropertyGroup=zi),(On.findPropertyGroupDeep=Nu),(On.findRenderQueue=Yi),(On.first=Wc),(On.get=Fc),(On.getActiveComp=Be),(On.getActiveItem=Gc),(On.getAllSelectedKeyFrames=je),(On.getAnchorPointProperty=Ic),(On.getAudioLevelsProperty=Tc),(On.getConstructorName=Dc),(On.getEffectProperty=Lc),(On.getEffects=wc),(On.getFile=Re),(On.getFirstSelectedItem=Zc),(On.getFirstSelectedLayer=Xc),(On.getFirstSelectedProperty=Hc),(On.getFolder=be),(On.getFolderFiles=Oe),(On.getFolderPath=Me),(On.getLabelColorRef=Ge),(On.getLastLayer=we),(On.getLastSelectedItem=rp),(On.getLastSelectedLayer=tp),(On.getLastSelectedProperty=np),(On.getLayerStylesProperty=Cc),(On.getLayerType=Ve),(On.getMainSource=Sc),(On.getMissingFootagePath=xc),(On.getOrientationProperty=kc),(On.getPlainFileName=Ne),(On.getPositionProperty=Bc),(On.getProject=Vc),(On.getProjectFile=Nc),(On.getProjectFolder=$c),(On.getProjectItems=Kc),(On.getProperty=Pc),(On.getPropertyLayer=$e),(On.getPropertyNode=Ke),(On.getPropertyPath=Ue),(On.getRenderQueue=Uc),(On.getRootFolderItem=Qc),(On.getRootVectorsProperty=Ac),(On.getRotateProperty=Mc),(On.getRotateXProperty=jc),(On.getRotateYProperty=Rc),(On.getRotateZProperty=bc),(On.getScaleProperty=Oc),(On.getSelectedItems=_c),(On.getSelectedKeyframesValues=Qe),(On.getSelectedLayers=zc),(On.getSelectedProperties=Yc),(On.getSettings=Jc),(On.getTopLayer=_e),(On.getTransformProperty=Ec),(On.getViewOptions=qc),(On.groupBy=Ca),(On.groupCompItemBy=Aa),(On.groupCompItemDeepBy=Na),(On.groupCompItemDeepOnceBy=$a),(On.groupCompLayerBy=Ea),(On.groupCompLayerDeepBy=Ka),(On.groupCompLayerDeepOnceBy=Ua),(On.groupDeepBy=Va),(On.groupFileSetBy=Ia),(On.groupFileSetDeepBy=Qa),(On.groupFolderBy=Ta),(On.groupFolderDeepBy=_a),(On.groupFolderItemBy=ka),(On.groupFolderItemDeepBy=za),(On.groupFolderSetBy=Ba),(On.groupFolderSetDeepBy=Ya),(On.groupItemsBy=ja),(On.groupKeyframesBy=Ra),(On.groupOutputModulesBy=ba),(On.groupProjectItemsBy=Oa),(On.groupProjectLayersBy=Ma),(On.groupPropertyGroupBy=Ga),(On.groupPropertyGroupDeepBy=Ja),(On.groupRenderQueueBy=wa),(On.has=Ye),(On.hasActiveExpression=Je),(On.hasEffect=qe),(On.hasErrorExpression=We),(On.hasExpression=Xe),(On.hasExpressionContent=Ze),(On.hasKeyframes=He),(On.hasModifiedExpression=er),(On.hasPropertyMax=rr),(On.hasPropertyMin=tr),(On.hasPropertyValue=nr),(On.identity=ir),(On.importAsComp=ur),(On.importAsCroppedLayers=ar),(On.importAsFootage=cr),(On.importAsProject=pr),(On.importFile=sr),(On.indexOf=lr),(On.initial=fr),(On.isActiveExpressionProperty=yu),(On.isAdjustmentLayer=mr),(On.isApp=dr),(On.isArray=yr),(On.isAVLayer=op),(On.isCameraLayer=ip),(On.isCompItem=gr),(On.isCompLayer=hr),(On.isEmpty=vr),(On.isEnvironmentLayer=Fr),(On.isErrorExpression=Pr),(On.isErrorExpressionProperty=gu),(On.isExpressionEnabled=Sr),(On.isExpressionProperty=hu),(On.isFile=xr),(On.isFileExists=Lr),(On.isFolder=Cr),(On.isFolderItem=Ar),(On.isFootageItem=Er),(On.isFootageLayer=Ir),(On.isFunction=Tr),(On.isGuideLayer=kr),(On.isImportedItem=Br),(On.isImportedLayer=jr),(On.isItem=Rr),(On.isIterablePropertyGroup=br),(On.isLightLayer=up),(On.isMacOs=Mr),(On.isMaskPropertyGroup=Or),(On.isMissingFootage=Gr),(On.isModifiedExpressionProperty=vu),(On.isNil=wr),(On.isNull=Vr),(On.isNullLayer=Nr),(On.isNumber=$r),(On.isObject=Kr),(On.isObjectLike=Ur),(On.isPlaceholder=Qr),(On.isPlaceholderLayer=_r),(On.isPlainObject=zr),(On.isProperty=Yr),(On.isPropertyGroup=Jr),(On.isReadyToRender=qr),(On.isScriptFile=Wr),(On.isShapeLayer=ap),(On.isSinglePropertyGroup=Xr),(On.isSolidItem=Zr),(On.isSolidLayer=Hr),(On.isSourceFileMissing=et),(On.isString=rt),(On.isTextLayer=cp),(On.isThreeDLayer=tt),(On.isTimeRemapLayer=nt),(On.isUndefined=ot),(On.isValidExpression=it),(On.isWindowsOs=ut),(On.isXml=at),(On.join=ct),(On.keepProjectPanel=pt),(On.keys=st),(On.last=ep),(On.locklessLayer=mt),(On.log=dt),(On.logJson=yt),(On.logTime=gt),(On.map=Ji),(On.mapActiveExpressionPropertiesDeep=ea),(On.mapCollection=qi),(On.mapCompItem=Wi),(On.mapCompItemDeep=Uu),(On.mapCompItemDeepOnce=Qu),(On.mapCompLayer=Xi),(On.mapCompLayerDeep=_u),(On.mapCompLayerDeepOnce=zu),(On.mapDeep=Ku),(On.mapExpressionPropertiesDeep=Zu),(On.mapFileSet=Zi),(On.mapFileSetDeep=Yu),(On.mapFolder=Hi),(On.mapFolderDeep=Ju),(On.mapFolderItem=eu),(On.mapFolderItemDeep=qu),(On.mapFolderSet=ru),(On.mapFolderSetDeep=Wu),(On.mapKeyframes=tu),(On.mapKeys=ht),(On.mapModifiedExpressionPropertiesDeep=Hu),(On.mapOutputModules=nu),(On.mapProjectItems=ou),(On.mapProjectLayers=iu),(On.mapPropertyGroup=uu),(On.mapPropertyGroupDeep=Xu),(On.mapRenderQueue=au),(On.mapValues=vt),(On.mathFloor=Ro),(On.mathRound=bo),(On.moveFile=Ft),(On.negate=Pt),(On.newFile=Dt),(On.newFolder=St),(On.noop=xt),(On.objectToJSON=Lt),(On.once=Ct),(On.or=At),(On.overEvery=Et),(On.padZero=It),(On.parseJson=Tt),(On.parsePrefs=kt),(On.partition=qa),(On.partitionCollection=Wa),(On.partitionCompItem=Xa),(On.partitionCompItemDeep=sc),(On.partitionCompItemDeepOnce=lc),(On.partitionCompLayer=Za),(On.partitionCompLayerDeep=fc),(On.partitionCompLayerDeepOnce=mc),(On.partitionDeep=pc),(On.partitionFileSet=Ha),(On.partitionFileSetDeep=dc),(On.partitionFolder=ec),(On.partitionFolderDeep=yc),(On.partitionFolderItem=rc),(On.partitionFolderItemDeep=gc),(On.partitionFolderSet=tc),(On.partitionFolderSetDeep=hc),(On.partitionKeyframes=nc),(On.partitionOutputModules=oc),(On.partitionPrefsPairs=Bt),(On.partitionProjectItems=ic),(On.partitionProjectLayers=uc),(On.partitionPropertyGroup=ac),(On.partitionPropertyGroupDeep=vc),(On.partitionRenderQueue=cc),(On.pick=jt),(On.pickBy=Rt),(On.pluck=ra),(On.pluckCollection=ta),(On.pluckCompItem=na),(On.pluckCompItemDeep=ga),(On.pluckCompItemDeepOnce=ha),(On.pluckCompLayer=oa),(On.pluckCompLayerDeep=va),(On.pluckCompLayerDeepOnce=Fa),(On.pluckDeep=ya),(On.pluckFileSet=ia),(On.pluckFileSetDeep=Pa),(On.pluckFolder=ua),(On.pluckFolderDeep=Da),(On.pluckFolderItem=aa),(On.pluckFolderItemDeep=Sa),(On.pluckFolderSet=ca),(On.pluckFolderSetDeep=xa),(On.pluckKeyframes=pa),(On.pluckOutputModules=sa),(On.pluckProjectItems=la),(On.pluckProjectLayers=fa),(On.pluckPropertyGroup=ma),(On.pluckPropertyGroupDeep=La),(On.pluckRenderQueue=da),(On.precompose=bt),(On.precomposeEvery=Ot),(On.precomposeSelectedLayers=Mt),(On.precomposeSelectedLayersEvery=Gt),(On.precomposeWithLayers=wt),(On.print=Vt),(On.property=Nt),(On.readFile=$t),(On.removeAllEffects=Kt),(On.removeAllExpressions=Ut),(On.removeAllKeyFrames=Qt),(On.removeAllSelectedKeyFrames=_t),(On.removeExpression=zt),(On.removeItem=Yt),(On.removeKeyframes=Jt),(On.removeLayerKeyFrames=qt),(On.removeProperty=Wt),(On.removeSelectedKeyFrames=Xt),(On.replaceExpressionCompRef=Zt),(On.replaceExpressionLayerRef=Ht),(On.replaceLayerSourceDeep=en),(On.revealFile=rn),(On.revealFolder=tn),(On.revealPreferences=nn),(On.saveFrameToPng=on),(On.savePngSequence=un),(On.secondToFrame=an),(On.setExpression=cn),(On.setPropertiesValue=pn),(On.setProperty=sn),(On.setPropertyMax=ln),(On.setPropertyMin=fn),(On.setUndoGroup=mn),(On.setViewRatio=dn),(On.size=yn),(On.some=gn),(On.stubFalse=Fn),(On.stubTrue=Pn),(On.subtract=Dn),(On.templateString=Sn),(On.times=xn),(On.unary=An),(On.undo=En),(On.uniq=In),(On.unzip=Tn),(On.values=kn),(On.writeFile=Bn),(On.writeJson=jn),(On.zip=Rn),(On.zipObject=bn),On)}.call(this);

    var SCRIPT_NAME = 'Footage Helpers',
        SCRIPT_VERSION = '1.0.1',
        SCRIPT_DATE = '2022/11/24',
        SCRIPT_AUTHOR = 'Raymond Yan';

    var elements = Tree.parse({
        group: {
            style: { orientation: 'column', alignChildren: ['left', 'top'] },
            panel1: { param: [, , 'Alpha'], style: { preferredSize: [300, -1], margins: [10, 15, 10, 10], orientation: 'column', alignChildren: ['left', ''] }, group1: { style: { margins: 0, preferredSize: [100, -1], orientation: 'row', alignChildren: ['left', 'top'] }, group: { param: ['alphaMode'], style: { orientation: 'column', alignChildren: ['left', 'top'] }, radiobutton1: ['alphaModeIgnore', , '忽略'], radiobutton2: ['alphaModeStraight', , '直接 - 无遮罩'], radiobutton3: { param: ['alphaModePremultiplied', , '预乘 - 有彩色遮罩'], style: { value: true } } }, checkbox: { param: ['invertAlpha', , '反转 Alpha'], style: { alignment: ['right', 'top'] } } }, group2: { style: { margins: [1, 5, 5, 5], alignChildren: ['left', ''] }, checkbox1: { param: ['switchAlpha', [0, 10, 123, 25], '修改 Alpha'], style: { value: true } }, checkbox2: { param: ['switchInvert', [0, 10, 110, 25], '修改 Alpha 反转'], style: { value: true } } } },
            panel2: { param: [, , '帧速率'], style: { preferredSize: [300, -1], margins: [11, 15, 10, 10], spacing: 2, orientation: 'row', alignChildren: ['left', ''] }, checkbox: { param: ['switchFrameRate', [0, 10, 15, 25]], style: { value: true } }, statictext: [, [0, 0, 100, 25], '匹配帧速率'], edittext: { param: ['conformFrameRate', [0, 0, 100, 25], '30'], style: { helpTip: '取值范围：[0, 999]\n0值恢复为默认帧率' } } },
            panel3: { param: [, , '场和 Pulldown'], style: { preferredSize: [300, -1], margins: [11, 15, 10, 10], spacing: 2, orientation: 'column', alignChildren: ['left', ''] }, group1: { style: { spacing: 2 }, checkbox: { param: ['switchField', [0, 10, 15, 25]], style: { value: true } }, statictext: [, [0, 0, 100, 25], '分离场'], dropdownlist: { param: ['fieldSeparationType', [0, 0, 150, 25], ['关', '高场优先', '低场优先']], style: { alignment: ['fill', ''], selection: 0 } } }, group2: { style: { spacing: 2 }, checkbox: { param: ['switchPulldown', [0, 10, 15, 25]], style: { value: true } }, statictext: [, [0, 0, 100, 25], '移除 Pulldown'], dropdownlist: { param: ['removePulldown', [0, 0, 150, 25], ['关', 'WSSWW', 'SSWWW', 'SWWWS', 'WWWSS', 'WWSSW', 'WWWSW - 24p 高级', 'WWSWW - 24p 高级', 'WSWWW - 24p 高级', 'SWWWW - 24p 高级', 'WWWWS - 24p 高级']], style: { alignment: ['fill', ''], enabled: false, selection: 0 } } } },
            panel4: { param: [, , '其他选项'], style: { preferredSize: [300, -1], margins: [11, 15, 10, 10], spacing: 2, orientation: 'column', alignChildren: ['left', ''] }, group1: { style: { spacing: 2 }, checkbox: { param: ['switchAspect', [0, 10, 15, 25]], style: { value: true } }, statictext: [, [0, 0, 100, 25], '像素长宽比'], dropdownlist: { param: ['pixelAspect', [0, 0, 150, 25], ['方形像素', 'D1/DV NTSC (0.91)', 'D1/DV NTSC 宽银幕 (1.21)', 'D1/DV PAL (1.09)', 'D1/DV PAL 宽银幕 (1.46)', 'HDV 1080/DVCPRO HD 720 (1.33)', 'DVCPRO HD 1080 (1.5)', '变形 2:1 (2)']], style: { alignment: ['fill', ''], selection: 0 } } }, group2: { style: { spacing: 2 }, checkbox: { param: ['switchLoop', [0, 10, 15, 25]], style: { value: true } }, statictext: [, [0, 0, 100, 25], '循环'], edittext: { param: ['loop', [0, 0, 100, 25], '1'], style: { helpTip: '取值范围：[1, 9999]' } } } },
        },
        button: { param: ['run', [0, 0, 300, 30]], style: { text: '修改', onClick: runScript, helpTip: SCRIPT_NAME + ' ' + SCRIPT_VERSION + ' | ' + SCRIPT_DATE + ' | ' + SCRIPT_AUTHOR } },
    });

    var ALPHA_MODE_REFERENCES = [5413, 5412, 5414],
        FIELD_SEPARATION_REFERENCES = [5613, 5612, 5614],
        PIXEL_ASPECT_REFERENCES = [1, 0.91, 1.21, 1.09, 1.46, 1.33, 1.5, 2],
        REMOVE_PULLDOWN_REFERENCES = [5813, 5812, 5814, 5815, 5816, 5817, 5818, 5819, 5820, 5821, 5822];

    var eleAlphaMode = elements.getElementById('alphaMode'),
        eleInvertAlpha = elements.getElementById('invertAlpha'),
        eleConformFrameRate = elements.getElementById('conformFrameRate'),
        eleFieldSeparationType = elements.getElementById('fieldSeparationType'),
        eleRemovePulldown = elements.getElementById('removePulldown'),
        elePixelAspect = elements.getElementById('pixelAspect'),
        eleLoop = elements.getElementById('loop');

    var eleSwitchAlpha = elements.getElementById('switchAlpha'),
        eleSwitchInvert = elements.getElementById('switchInvert'),
        eleSwitchFrameRate = elements.getElementById('switchFrameRate'),
        eleSwitchField = elements.getElementById('switchField'),
        eleSwitchPulldown = elements.getElementById('switchPulldown'),
        eleSwitchAspect = elements.getElementById('switchAspect'),
        eleSwitchLoop = elements.getElementById('switchLoop');

    elements.defaultElement = elements.getElementById('run');

    var VALID_CACHE = { conformFrameRate: eleConformFrameRate.text, loop: eleLoop.text };

    eleFieldSeparationType.onChange = function () {
        if (_.get(this, ['selection', 'index']) === 0) {
            eleRemovePulldown.selection = 0;
            eleRemovePulldown.enabled = false;
        } else {
            eleRemovePulldown.enabled = true;
        }
    };

    eleConformFrameRate.onChange = function () {
        var value = Number(this.text);
        if (value < 0 || value > 999) {
            this.text = VALID_CACHE.conformFrameRate;
        } else {
            VALID_CACHE.conformFrameRate = value;
        }
    };

    eleLoop.onChange = function () {
        var value = Number(this.text);
        if (value < 1 || value > 9999) {
            this.text = VALID_CACHE.loop;
        } else {
            VALID_CACHE.loop = this.text = _.mathRound(value);
        }
    };

    function runScript() {
        var items = _.getSelectedItems();
        if (_.isEmpty(items)) return;

        var footageItems = _.filter(items, _.isFootageItem);
        if (_.isEmpty(footageItems)) return;

        var enableAlpha = eleSwitchAlpha.value,
            enableInvert = eleSwitchInvert.value,
            enableFrameRate = eleSwitchFrameRate.value,
            enableField = eleSwitchField.value,
            enablePulldown = eleSwitchPulldown.value,
            enableAspect = eleSwitchAspect.value,
            enableLoop = eleSwitchLoop.value;

        var newAlphaMode = _.findIndex(eleAlphaMode.getElementsByType('radiobutton'), _.property('value')),
            newConformFrameRate = Number(eleConformFrameRate.text),
            newLoopValue = Number(eleLoop.text);

        var newFieldSeparationType = eleFieldSeparationType.selection.index,
            newInvertAlphaValue = eleInvertAlpha.value,
            newPixelAspect = elePixelAspect.selection.index,
            newRemovePulldownValue = eleRemovePulldown.selection.index;

        _.setUndoGroup('Set Footage Options', function () {
            _.each(footageItems, function (item) {
                var mainSource = item.mainSource;

                enableAspect && (item.pixelAspect = mapPixelAspect(newPixelAspect));

                if (!mainSource.isStill) {
                    enableFrameRate && setConformFrameRate(mainSource, newConformFrameRate);
                    enableField && setFieldSeparationType(mainSource, mapFieldSeparation(newFieldSeparationType));
                    enablePulldown && setRemovePulldown(mainSource, mapRemovePulldown(newRemovePulldownValue));
                    enableLoop && (mainSource.loop = newLoopValue);
                }

                if (mainSource.hasAlpha) {
                    enableAlpha && (mainSource.alphaMode = mapAlphaMode(newAlphaMode));
                }
                enableInvert && (mainSource.invertAlpha = newInvertAlphaValue);
            });
        });
    }

    function mapAlphaMode(index) {
        return ALPHA_MODE_REFERENCES[index];
    }

    function mapFieldSeparation(index) {
        return FIELD_SEPARATION_REFERENCES[index];
    }

    function mapPixelAspect(index) {
        return PIXEL_ASPECT_REFERENCES[index];
    }

    function mapRemovePulldown(index) {
        return REMOVE_PULLDOWN_REFERENCES[index];
    }

    function setConformFrameRate(mainSource, newValue) {
        if (mainSource.removePulldown !== 5813 && newValue === 0) return;
        mainSource.conformFrameRate = newValue;
    }

    function setFieldSeparationType(mainSource, newValue) {
        if (mainSource.removePulldown !== 5813 && newValue === 5613) return;
        mainSource.fieldSeparationType = newValue;
    }

    function setRemovePulldown(mainSource, newValue) {
        if (mainSource.fieldSeparationType === 5613 && newValue !== 5813) return;
        mainSource.removePulldown = newValue;
    }
})(this);
